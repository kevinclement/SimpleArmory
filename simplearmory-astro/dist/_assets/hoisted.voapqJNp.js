import{i as u,s as f,g as y,p as v,b as w}from"./Nav.astro_astro_type_script_index_0_lang.CT0JDFuw.js";import{g as E}from"./achievements.bdcs346B.js";document.addEventListener("DOMContentLoaded",()=>{u();const e=y();h(e),f(h),window.ga&&window.ga("send","pageview","Achievements/"+(e.category||""))});async function h(e){if(!e.region||!e.realm||!e.character)return;const t=document.getElementById("loading-indicator"),n=document.getElementById("achievements-error"),c=document.getElementById("achievements-container");t&&(t.style.display="block"),n&&(n.style.display="none"),c&&(c.innerHTML="");try{const r=await E(e.region,e.realm,e.character);if(t&&(t.style.display="none"),r){const i=S(e.category),s=document.getElementById("achievement-category");s&&(s.textContent=i);const a=r[i];if(a){const m=i==="Feats of Strength"||i==="Legacy"?100:v(a.completed,a.possible),o=w(a.completed,a.possible);C(m,o),b(a,i)}else I(`No achievements found for category: ${i}`)}}catch(r){console.error("Error loading achievements:",r),t&&(t.style.display="none"),n&&(n.style.display="block")}}function C(e,t){const n=document.getElementById("achievements-progress"),c=document.getElementById("achievements-percentage");n&&(n.style.width=e+"%",n.setAttribute("aria-valuenow",e.toString())),c&&(c.textContent=t)}function b(e,t){const n=document.getElementById("achievements-container");!n||!e.categories||(n.innerHTML="",e.categories.forEach(c=>{const r=document.createElement("div");r.className="achievement-category";const i=document.createElement("h3");i.className="category-header",i.textContent=c.name,r.appendChild(i),c.subcats&&c.subcats.length>0&&c.subcats.forEach(s=>{const a=document.createElement("div");a.className="achievement-subcategory";const l=document.createElement("h4");l.className="subcategory-header",l.textContent=s.name,a.appendChild(l);const m=document.createElement("div");m.className="achievements-grid",s.achievements&&s.achievements.length>0&&s.achievements.forEach(o=>{const d=document.createElement("div");d.className=`achievement-item ${o.completed?"completed":"not-completed"}`;const p=document.createElement("a");p.href=`//www.wowhead.com/achievement=${o.id}`,p.target="_blank";const g=document.createElement("img");g.src=o.icon?`//wow.zamimg.com/images/wow/icons/small/${o.icon}.jpg`:"",g.alt=o.name,g.title=o.name,p.appendChild(g),d.appendChild(p),d.dataset.achievementId=o.id.toString(),d.dataset.achievementName=o.name,d.dataset.achievementCompleted=o.completed.toString(),m.appendChild(d)}),a.appendChild(m),r.appendChild(a)}),n.appendChild(r)}),window.__WH&&window.__WH.tooltips?window.__WH.tooltips.refresh():window.WH&&window.WH.Tooltip&&window.WH.Tooltip.refresh())}function I(e){const t=document.getElementById("achievements-container");t&&(t.innerHTML=`
      <div class="error-message">
        <p>${e}</p>
        <p>Please try again later or check your character information.</p>
      </div>
    `)}function S(e){return e?{character:"Characters",quests:"Quests",exploration:"Exploration",delves:"Delves",pvp:"Player vs. Player",dungeons:"Dungeons & Raids",professions:"Professions",reputation:"Reputation",events:"World Events",pets:"Pet Battles",collections:"Collections",expansions:"Expansion Features",remix:"Remix: Pandaria",legacy:"Legacy",feats:"Feats of Strength"}[e]||e:"Characters"}
