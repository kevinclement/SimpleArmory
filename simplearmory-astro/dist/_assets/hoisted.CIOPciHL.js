import{i as d,s as u,p as i,b as c,c as p,g as m}from"./Nav.astro_astro_type_script_index_0_lang.CT0JDFuw.js";import{g as I}from"./achievements.bdcs346B.js";const n={Characters:{w:0,txt:"",url:"INIT",seg:"character"},Quests:{w:0,txt:"",url:"INIT",seg:"quests"},Exploration:{w:0,txt:"",url:"INIT",seg:"exploration"},Delves:{w:0,txt:"",url:"INIT",seg:"delves"},"Player vs. Player":{w:0,txt:"",url:"INIT",seg:"pvp"},"Dungeons & Raids":{w:0,txt:"",url:"INIT",seg:"dungeons"},Professions:{w:0,txt:"",url:"INIT",seg:"professions"},Reputation:{w:0,txt:"",url:"INIT",seg:"reputation"},"World Events":{w:0,txt:"",url:"INIT",seg:"events"},"Pet Battles":{w:0,txt:"",url:"INIT",seg:"pets"},Collections:{w:0,txt:"",url:"INIT",seg:"collections"},"Expansion Features":{w:0,txt:"",url:"INIT",seg:"expansions"},Legacy:{w:0,txt:"",url:"INIT",seg:"legacy"},"Feats of Strength":{w:0,txt:"",url:"INIT",seg:"feats"}};document.addEventListener("DOMContentLoaded",()=>{d();const r=m();g(r),u(g),window.ga&&window.ga("send","pageview","Overview")});async function g(r){if(!(!r.region||!r.realm||!r.character))try{const e=await I(r.region,r.realm,r.character);if(e){const o=i(e.completed,e.possible),s=c(e.completed,e.possible);v(o,s),Object.keys(n).forEach(t=>{n[t].seg==="legacy"?(n[t].w=100,n[t].txt=e[t].legacyTotal):n[t].seg==="feats"?(n[t].w=100,n[t].txt=e[t].foSTotal):(n[t].w=i(e[t].completed,e[t].possible),n[t].txt=c(e[t].completed,e[t].possible)),n[t].url=p(r.region,r.realm,r.character,"achievements/"+n[t].seg)}),w()}}catch(e){console.error("Error loading achievements:",e),f("Failed to load achievement data")}}function v(r,e){const o=document.getElementById("overall-progress"),s=document.getElementById("overall-percentage");o&&(o.style.width=r+"%",o.setAttribute("aria-valuenow",r.toString())),s&&(s.textContent=e)}function w(){const r=document.getElementById("categories-container");r&&(r.innerHTML="",Object.keys(n).forEach(e=>{const o=n[e],s=document.createElement("div");s.className="achGrid";const t=document.createElement("strong");t.className="desc",t.textContent=e,s.appendChild(t);const a=h(e,o.w,o.txt,o.url);s.appendChild(a),r.appendChild(s)}))}function h(r,e,o,s){const t=document.createElement("div");t.className="progress",t.style.width="auto";const a=document.createElement("div");if(a.className="progress-bar",a.setAttribute("role","progressbar"),a.setAttribute("aria-valuenow",e.toString()),a.setAttribute("aria-valuemin","0"),a.setAttribute("aria-valuemax","100"),a.style.width=e+"%",s&&s!=="INIT"){const l=document.createElement("a");l.href=s,l.className="progress-bar-link",l.textContent=o,a.appendChild(l)}else{const l=document.createElement("span");l.textContent=o,a.appendChild(l)}return t.appendChild(a),t}function f(r){const e=document.getElementById("categories-container");e&&(e.innerHTML=`
      <div class="error-message">
        <p>${r}</p>
        <p>Please try again later or check your character information.</p>
      </div>
    `)}
