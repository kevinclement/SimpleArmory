---
/**
 * ProgressBar component
 * Used to display collection progress throughout the application
 */

interface Props {
  width?: number;           // Width of the progress bar (0-100)
  percentage?: string;      // Text to display in the progress bar
  url?: string;             // Optional URL to link the progress bar to 
  rightSide?: boolean;      // Whether to align the progress bar to the right side
  styleWidth?: string;      // Custom width style for the progress bar container
  name?: string;            // Optional name for the progress bar (for identification)
}

const { 
  width = 0, 
  percentage = "", 
  url = "", 
  rightSide = false,
  styleWidth = "400px",
  name = ""
} = Astro.props;

// Only display URL if it's not the placeholder 'INIT' value
const showUrl = url && url !== 'INIT';
---

<div class="progress" style={`width: ${styleWidth}; ${rightSide ? 'float: right;' : ''}`}>
  <div 
    class="progress-bar" 
    role="progressbar" 
    aria-valuenow={width} 
    aria-valuemin="0" 
    aria-valuemax="100" 
    style={`width: ${width}%;`}
    data-name={name}>
    {showUrl ? (
      <a class="progress-bar-link" href={url}>
        {percentage}
      </a>
    ) : (
      <span>{percentage}</span>
    )}
  </div>
</div>

<style>
  .progress {
    margin-bottom: 10px;
    vertical-align: middle;
    display: inline-block;
  }
  
  .progress-bar {
    text-align: center;
    color: white;
    transition: width 0.5s ease;
  }
  
  .progress-bar-link {
    color: white;
    display: block;
    width: 100%;
    height: 100%;
    text-decoration: none;
  }
  
  .progress-bar-link:hover {
    text-decoration: none;
    color: white;
  }
</style>